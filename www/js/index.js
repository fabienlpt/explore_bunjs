var g=function(){N.fillStyle=V,N.fillRect(0,0,G,L)},b=function(A,F,H,T,q){const K=A*H,M=F*H;if(q)N.fillStyle=q,N.fillRect(K+1,M+1,H-2,H-2);N.strokeStyle=T,N.strokeRect(K,M,H,H)},m=function(A,F,H){b(A,F,O*3,y,H);for(let T=0;T<3;T++)for(let q=0;q<3;q++)b(A*3+q,F*3+T,O,p)},w=function(A,F){if(Q[F][A]!==null){N.font="bold 60px Arial",N.textBaseline="middle",N.textAlign="center";const H=A*O+Math.floor(O*0.5),T=F*O+Math.floor(O*0.575);N.fillText(Q[F][A].toString(),H,T)}else{N.fillStyle="#000",N.font="16px Arial",N.textBaseline="top",N.textAlign="start";const H=W[F][A],T=Math.max(O-2,Math.floor(O*0.8)),q=Math.floor(T/3),K=Math.max(1,Math.floor(O*0.1)),M=A*O+K,Z=F*O+K;for(let X=1;X<=9;X++){const $=H.includes(X)?X:null,h=(X-1)%3,k=Math.floor((X-1)/3),I=M+q*h,D=Z+q*k;N.fillText($!==null?$.toString():"",I,D)}}},P=function(){for(let A=0;A<9;A++)for(let F=0;F<9;F++)w(F,A)},B=function(){g();for(let A=0;A<3;A++)for(let F=0;F<3;F++)m(F,A)},u=function(A){if(U===null)return;const[F,H]=U;if(!W[H][F].includes(A))return;if(Q[H][F]!==null)return;if(Q[H][F]===A)Q[H][F]=null,E(F,H,A,!0);else Q[H][F]=A,E(F,H,A,!1);B(),P()},E=function(A,F,H,T){[...J(A,F),...R(A,F),...f(A,F)].forEach(([K,M])=>{if(T){if(!Q[M][K]&&!z(M,K,H))W[M][K].push(H)}else{const Z=W[M][K].indexOf(H);if(Z>-1)W[M][K].splice(Z,1)}})},J=function(A,F){const H=[];for(let T=0;T<9;T++)if(T!==A)H.push([T,F]);return H},R=function(A,F){const H=[];for(let T=0;T<9;T++)if(T!==F)H.push([A,T]);return H},f=function(A,F){const H=[],T=Math.floor(F/3)*3,q=Math.floor(A/3)*3;for(let K=T;K<T+3;K++)for(let M=q;M<q+3;M++)if(M!==A||K!==F)H.push([M,K]);return H},z=function(A,F,H){return[...J(F,A),...R(F,A),...f(F,A)].some(([q,K])=>Q[K][q]===H)},_=new WebSocket(`ws://${location.host}`);_.onopen=()=>setInterval(()=>_.send("ping"),5000);_.onmessage=(A)=>{if(A.data!=="Well received")console.log(A.data);if(A.data==="reload")location.reload()};var V="#DDD",p="#AAA",y="#000",Y=document.getElementById("sudokuCanvas"),N=Y.getContext("2d"),G=Y.width,L=Y.height,O=Math.round(Math.min(G,L)/9),W=[],Q=[];for(let A=0;A<9;A++){W.push([]),Q.push([]);for(let F=0;F<9;F++)W[A].push([1,2,3,4,5,6,7,8,9]),Q[A].push(null)}B();P();var U=null;Y.addEventListener("mousemove",(A)=>{A.stopPropagation();const{offsetX:F,offsetY:H}=A,T=Math.min(Math.floor(F/O),8),q=Math.min(Math.floor(H/O),8);if(U===null||U[0]!==T||U[1]!==q)U=[T,q]});Y.addEventListener("mouseout",(A)=>{A.stopPropagation(),U=null});document.addEventListener("keydown",(A)=>{if(U!==null&&!isNaN(Number(A.key)))console.log("Touche press\xE9e:",A.key),u(Number(A.key))});console.log("Frontend charg\xE9");
