var m=function(){N.fillStyle=V,N.fillRect(0,0,P,b)},E=function(A,H,T,q,F){const K=A*T,M=H*T;if(F)N.fillStyle=F,N.fillRect(K+1,M+1,T-2,T-2);N.strokeStyle=q,N.strokeRect(K,M,T,T)},g=function(A,H,T){E(A,H,O*3,y,T);for(let q=0;q<3;q++)for(let F=0;F<3;F++)E(A*3+F,H*3+q,O,p)},w=function(A,H){if(Q[H][A]!==null){N.font="bold 60px Arial",N.textBaseline="middle",N.textAlign="center";const T=A*O+Math.floor(O*0.5),q=H*O+Math.floor(O*0.575);N.fillText(Q[H][A].toString(),T,q)}else{N.fillStyle="#000",N.font="16px Arial",N.textBaseline="top",N.textAlign="start";const T=W[H][A],q=Math.max(O-2,Math.floor(O*0.8)),F=Math.floor(q/3),K=Math.max(1,Math.floor(O*0.1)),M=A*O+K,Z=H*O+K;for(let X=1;X<=9;X++){const $=T.includes(X)?X:null,h=(X-1)%3,k=Math.floor((X-1)/3),I=M+F*h,D=Z+F*k;N.fillText($!==null?$.toString():"",I,D)}}},B=function(){for(let A=0;A<9;A++)for(let H=0;H<9;H++)w(H,A)},G=function(){m();for(let A=0;A<3;A++)for(let H=0;H<3;H++)g(H,A)},u=function(A){if(U===null)return;const[H,T]=U;if(!W[T][H].includes(A))return;if(Q[T][H]===A)Q[T][H]=null,L(H,T,A,!0);else{if(Q[T][H]!==null)return;Q[T][H]=A,L(H,T,A,!1)}G(),B()},L=function(A,H,T,q){[...J(A,H),...R(A,H),...f(A,H)].forEach(([K,M])=>{if(q){if(!Q[M][K]&&!z(M,K,T))W[M][K].push(T)}else{const Z=W[M][K].indexOf(T);if(Z>-1)W[M][K].splice(Z,1)}})},J=function(A,H){const T=[];for(let q=0;q<9;q++)if(q!==A)T.push([q,H]);return T},R=function(A,H){const T=[];for(let q=0;q<9;q++)if(q!==H)T.push([A,q]);return T},f=function(A,H){const T=[],q=Math.floor(H/3)*3,F=Math.floor(A/3)*3;for(let K=q;K<q+3;K++)for(let M=F;M<F+3;M++)if(M!==A||K!==H)T.push([M,K]);return T},z=function(A,H,T){return[...J(H,A),...R(H,A),...f(H,A)].some(([F,K])=>Q[K][F]===T)},_=new WebSocket(`ws://${location.host}`);_.onopen=()=>setInterval(()=>_.send("ping"),5000);_.onmessage=(A)=>{if(A.data!=="Well received")console.log(A.data);if(A.data==="reload")location.reload()};var V="#DDD",p="#AAA",y="#000",Y=document.getElementById("sudokuCanvas"),N=Y.getContext("2d"),P=Y.width,b=Y.height,O=Math.round(Math.min(P,b)/9),W=[],Q=[];for(let A=0;A<9;A++){W.push([]),Q.push([]);for(let H=0;H<9;H++)W[A].push([1,2,3,4,5,6,7,8,9]),Q[A].push(null)}G();B();var U=null;Y.addEventListener("mousemove",(A)=>{A.stopPropagation();const{offsetX:H,offsetY:T}=A,q=Math.min(Math.floor(H/O),8),F=Math.min(Math.floor(T/O),8);if(U===null||U[0]!==q||U[1]!==F)U=[q,F]});Y.addEventListener("mouseout",(A)=>{A.stopPropagation(),U=null});document.addEventListener("keydown",(A)=>{if(U!==null&&!isNaN(Number(A.key)))console.log("Touche press\xE9e:",A.key),u(Number(A.key))});console.log("Frontend charg\xE9");
